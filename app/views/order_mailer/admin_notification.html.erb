<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; color: #1f2937; }
    .container { max-width: 600px; margin: 0 auto; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    td { padding: 8px 0; border-bottom: 1px solid #f3f4f6; }
    .header { background: #1f2937; color: #fff; padding: 20px; margin-bottom: 24px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <strong>ðŸ›’ New Order: <%= @order.order_number %></strong>
      <span style="float: right; opacity: 0.7; font-size: 14px;"><%= number_to_currency(@order.grand_total) %></span>
    </div>

    <p><strong>Customer:</strong> <%= @order.customer_name %> (<%= @order.customer_email %>)</p>
    <p><strong>Phone:</strong> <%= @order.customer_phone %></p>
    <p><strong>Delivery Zone:</strong> <%= @order.delivery_zone&.name || "Unknown" %></p>
    <p><strong>Address:</strong> <%= @order.shipping_address_line %></p>

    <h3>Items</h3>
    <table>
      <% @order_items.each do |item| %>
        <tr>
          <td><%= item.product_name %> (SKU: <%= item.product_sku %>)</td>
          <td>Ã— <%= item.quantity %></td>
          <td style="text-align: right;"><%= number_to_currency(item.line_total) %></td>
        </tr>
      <% end %>
    </table>

    <p style="margin-top: 16px;"><a href="<%= ENV.fetch('APP_HOST', 'http://localhost:3000') %>/admin/orders/<%= @order.id %>">View Order in Admin Panel â†’</a></p>
  </div>
</body>
</html>
